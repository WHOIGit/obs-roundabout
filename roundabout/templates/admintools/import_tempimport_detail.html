{% extends "base.html" %}
{% load static i18n %}
{% block title %}Preview Import{% endblock %}

{% block content %}
<div class="container">

  <div class="parts-add-btn">
      <a href="{% url 'admintools:printers_add' %}" role="button" class="btn btn-primary">Import Ready! Complete Import</a>
  </div>
  <h2>Preview Import</h2>

  <hr>

  <h4>Import from {{ tempimport.name }}</h4>
  <table class="table table-striped table-hover">
      <thead>
          {% for item in tempimport.tempimportitems.all|slice:":1" %}
              {% for i in item.data %}
                  {% for key, value in i.items %}
                    <th>{{ key }}</th>
                  {% endfor %}
              {% endfor %}
          {% endfor %}

      </thead>
      <tbody>
        {% for item in tempimport.tempimportitems.all %}
            <tr>
                {% for i in item.data %}
                    {% for key, value in i.items %}
                          <td>
                              {{ value.data }}
                              {% if value.error %}
                                {% if key == 'Location' %}
                                    <div class="alert alert-danger" role="alert">ERROR. No matching Location. Check if Location exists.</div>
                                {% elif key == 'Part Number' %}
                                    <div class="alert alert-danger" role="alert">ERROR. No matching Part. Check if Part Number exists.</div>
                                {% elif key == 'Serial Number' %}
                                    <div class="alert alert-danger" role="alert">ERROR. Serial Number already exists.</div>
                                {% endif %}
                              {% endif %}
                          </td>
                    {% endfor %}
                {% endfor %}

            </tr>
        {% endfor %}
      </tbody>
</table>
</div>
{% endblock content %}
