<!--
# Copyright (C) 2019-2020 Woods Hole Oceanographic Institution
#
# This file is part of the Roundabout Database project ("RDB" or 
# "ooicgsn-roundabout").
#
# ooicgsn-roundabout is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 2 of the License, or
# (at your option) any later version.
#
# ooicgsn-roundabout is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with ooicgsn-roundabout in the COPYING.md file at the project root.
# If not, see <http://www.gnu.org/licenses/>.
-->

                <div class="card-header">
                    <h3>{{ location.name }}</h3>
                    
                </div>

                <div class="card-body">

                    {% if location.location_type %}<p>Location Type: {{ location.location_type }}</p>{% endif %}
                    {% if location.location_id %}<p>Location ID: {{ location.location_id }}</p>{% endif %}
                    <p>Parent: {{ location.parent.name }}</p>




{% block javascript %}

<script>
$(document).ready(function() {


    $('.ajax-btn').on('click','a',function(){
        var url = $(this).attr("data-update-url");
        console.log(url);

        $.ajax({
            url: url,
            success: function (data) {
              $("#detail-view").html(data);
            }
        });
    });

    $('#jstree-navtree').on('loaded.jstree', function() {
        // Open the tree to the selected item
        
        setTimeout(function() { // Adding a slight delay to ensure the node is open and rendered
            var selectedItem = $('#jstree-navtree').find('.jstree-clicked')
            console.log(selectedItem)
            if (selectedItem.length) {
                var container = $('#jstree-navtree').parent();
                var selectedItemOffsetFromTop = selectedItem.offset().top;
                var containerScrollTop = container.scrollTop();
                var containerHeight = container.height();
                var selectedItemHeight = selectedItem.outerHeight(true); // Include margin

                // Calculate the top scroll position to center the item
                var scrollTopToCenterItem = containerScrollTop + selectedItemOffsetFromTop - container.offset().top - (containerHeight / 2) + (selectedItemHeight / 2);
                
                container.animate({
                    scrollTop: scrollTopToCenterItem
                }, 'slow');
            }
        }, 300); // Adjust delay as necessary
    });


});
</script>

{% endblock javascript %}
