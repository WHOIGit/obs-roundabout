{% load common_tags %}

<div class="card-header">
    <h3>{{ location.name }}</h3>
    <h5>{{ location.get_root }} {% if location.location_type %} | Location Type: {{ location.location_type }}{% endif %}</h5>
</div>

<div class="card-body">


    {% if location.location_id %}<p>Location ID: {{ location.location_id }}</p>{% endif %}

    {% if location.deployed_deployments.exists %}
        <h5>Deployment History for this Location</h5>

        {% regroup location.deployed_deployments.all by build as build_list %}


        {% for build in build_list %}
        <ul class="list-group list-group-flush">
            <li class="list-group-item">Build: {{ build.grouper }}

        <ul class="list-group list-group-flush">
            {% for deployment in build.list %}
                <li class="list-group-item">

                    {% include "builds/deployment_detail.html" with deployment=deployment %}

                </li>
            {% endfor %}
            </ul>
         </li></ul>
        {% endfor %}

    {% endif %}





<div class="mt-3 ajax-btn">
    <a href="#" data-update-url="{% url 'locations:ajax_location_update' location.id %}" role="button" class="btn btn-primary">Edit Location</a>
    {% if request.user|has_group:"admin" or request.user|has_group:"technician" %}
        <a href="#" data-update-url="{% url 'locations:ajax_location_delete' location.id %}" role="button" class="btn btn-danger parts-delete">Delete</a>
    {% endif %}
</div>


{% block javascript %}

{% endblock javascript %}
